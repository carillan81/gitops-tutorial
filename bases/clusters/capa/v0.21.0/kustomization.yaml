apiVersion: kustomize.config.k8s.io/v1beta1
configMapGenerator:
  - files:
    - values=cluster_config.yaml
    name: ${cluster_name}-0.21.0-config
    namespace: org-${organization}
generatorOptions:
  disableNameSuffixHash: true
kind: Kustomization
patches:
  - patch: |
      - op: add
        path: /spec
          extraConfigs
            value:
              - kind: configMap
                name: ${cluster_name}-0.21.0-config
                namespace: org-${organization}
                priority: 55
    target:
      group: application.giantswarm.io
      kind: App
      name: ${cluster_name}
      namespace: org-${organization}
      version: v1alpha1
resources:
  - ../template